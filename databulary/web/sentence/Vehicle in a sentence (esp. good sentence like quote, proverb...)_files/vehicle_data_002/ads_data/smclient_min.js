;var smMainClientVersion='5.1.0.6',sminternalconfig={logs:!1,maxParamSize:200,maxUrlSize:2000,domain:'selectmedia.asia',protocol:'https',eventbase:'tok',playerContainer:'sm_player',maxHftFail:3,currentHftFail:0,hftrefresh:0,qadomain:'',smQAmode:!1,playerid:'',playertype:'prod',requestStatic:''};var smEventsDictionary={'PRE_INIT':100,'CDN_CHECK':100,'LOAD':100,'UI':10,'LOGIC_ERROR':100,'PLAYER_CLICK':100,'SETUP_ERROR':100,'HFT':10,'TIMER':10,'PLAYER_ERROR':100,'SESSION_END':100,'AD_REQUEST':10,'AD_PLAY':0,'AD_ERROR':10,'IMPRESSION':100,'AD_VERIFY':100,'COMPLETE':100,'AD_CLICK':100,'VIEWABILITY':100,};var smMacrosList={};var smMainScript='',smPlayer=null,smMainResponse='',smoperational={cpmWeight:0.8,paramPlayerUrl:'',protocol:'unknown',clientVersion:smMainClientVersion,responseType:'',loopnumber:0,loop:0,lastEvent:'',startTime:new Date().getTime(),HftStartTime:new Date().getTime(),adTagId:null,tagPriority:0,waterfallStr:'',hftResponseType:'',eventUrl:'',hftUrl:'',sessionId:'',visibilityState:'unknown',impressionPixel:'',clickPixel:'',completePixel:'',click:'',isUserInteraction:!1,servingScenario:'',width:'',height:'',playerVersion:'',latencynetwork:0,timerInterval:0,timerCounter:0,declaredurl:'',sensitiveKeyWordsState:!1,sensitiveKeyWordsMatch:'',sensitiveKeyWords:['porn','sex','xx','gay','fuck','naked','pussy','young','eroti','adult','ass','lesbian','bdsm','chat','bitch','boob','whore','blowjob','escort','horn','dick','poker','hamster'],sensitiveKeyWordsAdvertisers:[34],corruptedTrafficState:!1,corruptedTraffic:['cliqz.com/tracking'],isSentLoad:!1};var smcounters={breakIndex:0,lastTag:'',lastEventTS:new Date().getTime(),eventsSentLog:'',serveFlash:1,latencyLimit:120000,listsize:0,hftNumber:0,hftNumberInit:0,smLogicErrorsCollection:'',hftRefreshInterval:0,};var smStringParams='',smMembers={screen:'',docdiff:0,heightdiff:0,docReferrer:'',topLocation:'',sessionTTL:300e3};var smViewability={viewability:'unknown',measureType:'unknown',measureStatus:'unknown',viewabilityCheckInterval:250,percentViewable:0,startMeasureAd:0,currentTagId:0,viewable2Seconds:0,sentevent:0,totalTimeAd:0,totalViewable:0,startMeasurePlacement:0,viewabilityCheckIntervalPlacement:1000,SumViewablePlacement:0,totalTimePlacement:0,};var smTagsObjects={};function printLogs(e){if(sminternalconfig.logs){console.log(e)}};function printErrors(e){if(sminternalconfig.logs){console.error(e)}};function replaceCustomMacros(e,t){var i=e;for(var r in t){i=i.replace(r,t[r])};return i};function getShortString(e,t){if(e.length>=t){e=e.substring(0,t-3);e=e+'EOS'};return e};function smCreateObjectContainsValues(e,t){var r={};for(var i in e){if(i.indexOf(t)==0){r[i]=e[i]}};return r};function createSessionId(e){var i='',r='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';for(var t=0;t<e;t++)i+=r.charAt(Math.floor(Math.random()*r.length));return i};function smConvertObjectToString(e){var i='',r=Object.keys(e);for(var t=0;t<r.length;t++){i=i+r[t]+'='+e[r[t]]+'&'};return i};function getServingScenarioType(){try{if(window.top==window){return'OnPage'};var t=window;while(t.parent!=t){if(t.parent.document.domain!=t.document.domain){return'CrossDomainIframe'};t=t.parent};return'SameDomainIframe'}catch(e){};return'CrossDomainIframe'};function reportUrlTiming(e,t){if(e.indexOf('?')>-1){e=e.slice(0,e.indexOf('?')+1)};var i=(e.indexOf('.js')>-1?!0:!1);if(i&&smoperational.hftResponseType=='STATIC'){SMreportEvent('CDN_CHECK','latency:'+t+' url:'+e)}};function smCallURL(e){printLogs('Start sending request: '+e);if(!smoperational.corruptedTrafficState){try{var a=new Date().getTime(),r=e;r=getShortString(r,sminternalconfig.maxUrlSize);var i=document.createElement('script');i.type='text/javascript';i.async=!0;i.src=r;var n=document.getElementsByTagName('script')[0];n.parentNode.insertBefore(i,n);printLogs('Finished sending request: '+e)}catch(t){smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+' smCallURL:'+t;printErrors('Error while get smCallURL , url: '+e+', error: '+t)}}};function smReplacePixelMacros(e,t){var i=e;i=replaceCustomMacros(i,smMacrosList);var n={};for(var r in smTagsObjects[t]){var a='sm_tag_'+r;n[a]=smTagsObjects[t][r]};i=replaceCustomMacros(i,n);return i};function playerCourseIntoItself(e){var t=document.getElementById(e);t.outerHTML='';delete t};function smReportThirdPartyPixel(e,i){try{if(e=='IMPRESSION'&&smoperational.impressionPixel.indexOf('http')==0){var r=smReplacePixelMacros(smoperational.impressionPixel,i);smCallURL(r)}
else if(e=='COMPLETE'&&smoperational.completePixel.indexOf('http')==0){var r=smReplacePixelMacros(smoperational.completePixel,i);smCallURL(r)}
else if(e=='AD_CLICK'&&smoperational.clickPixel.indexOf('http')==0){var r=smReplacePixelMacros(smoperational.clickPixel,i);smCallURL(r)}}catch(t){SMreportEvent('LOGIC_ERROR','smReportThirdPartyPixel:'+t)}};function updatesmTagsObjects(e,t){if(t=='IMPRESSION'){smTagsObjects[e].imptime=new Date().getTime();smTagsObjects[e].impressions++;smTagsObjects[e].latency=smTagsObjects[e].imptime-smTagsObjects[e].starttime}
else if(t=='COMPLETE'){smTagsObjects[e].completes++;smTagsObjects[e].latency=new Date().getTime()-smTagsObjects[e].imptime}
else if(t=='AD_PLAY'){smTagsObjects[e].latency=new Date().getTime()-smTagsObjects[e].starttime}
else if(t=='AD_VERIFY'){smTagsObjects[e].verifys++;smTagsObjects[e].latency=new Date().getTime()-smTagsObjects[e].imptime}
else if(t=='AD_REQUEST'){smTagsObjects[e].starttime=new Date().getTime();smTagsObjects[e].requests++;smTagsObjects[e].latency=0;if(smTagsObjects[e].order==1){smcounters.breakIndex++}}
else if(t=='AD_ERROR'){smTagsObjects[e].errors++;smTagsObjects[e].latency=new Date().getTime()-smTagsObjects[e].starttime}};function initViewabilityStatus(){try{smViewability.percentViewable=$sf.ext.inViewPercentage();smViewability.measureType='safeFrame';if(smViewability.percentViewable>50&&smoperational.visibilityState=='visible'){smViewability.viewability=!0};return}catch(e){};if(document.getElementById(sminternalconfig.playerContainer)){try{var t=new smOpenAdViewability(),i=document.getElementById(sminternalconfig.playerContainer);t.checkViewability(i,function(e){smViewability.percentViewable=e.percentViewable;smViewability.measureType='viewability'});if(smViewability.percentViewable>50&&smoperational.visibilityState=='visible'){smViewability.viewability=!0};return}catch(e){smViewability.measureType='not measurable';smViewability.measureStatus='not measurable'}}};function smViewSf(){var e=$sf.ext.inViewPercentage();smViewability.percentViewable=e;return e};function smViewReg(){var e,t=new smOpenAdViewability(),i=document.getElementById(sminternalconfig.playerContainer);t.checkViewability(i,function(t){e=t.percentViewable;smViewability.percentViewable=e});return e};function smCheckViewabilityStatus(){var e=-1;if(smViewability.measureType=='not measurable'){return e};if(smViewability.measureType=='unknown'){initViewabilityStatus()};if(smViewability.measureType=='safeFrame'){e=smViewSf();return e};if(smViewability.measureType=='viewability'){e=smViewReg();return e}};function beautifyAreWeGotViewability(){res={totalViewableTime:0,viewable:0,timeFromImp:0,visible:0,inFocus:0,percentViewable:0};res.totalViewableTime=Math.round(smViewability.totalViewable*smViewability.viewabilityCheckInterval/100)/10;res.viewable=smViewability.sentevent;res.timeFromImp=Math.round(smViewability.totalTimeAd*smViewability.viewabilityCheckInterval/100)/10;res.inFocus=(smoperational.visibilityState=='visible'?!0:!1);res.visible=(smViewability.viewability==!0?'visible':'hidden');res.percentViewable=smViewability.percentViewable;return res};function smPlacementView(){smViewability.totalTimePlacement++;if(smoperational.visibilityState=='visible'){var t=smCheckViewabilityStatus(),e=Math.max(Math.min(t,100),0);smViewability.SumViewablePlacement=smViewability.SumViewablePlacement+e;currentStatus=(e>50?!0:!1);smViewability.viewability=currentStatus}};function smAdView(){smViewability.totalTimeAd++;var e=!1;if(smoperational.visibilityState=='visible'){var t=smCheckViewabilityStatus(),i=Math.max(Math.min(t,100),0);e=(i>50?!0:!1);smViewability.viewability=e};if(e==!0){smViewability.totalViewable++;smViewability.viewable2Seconds++}
else if(e==!1){smViewability.viewable2Seconds=0};if(2000/smViewability.viewabilityCheckInterval<=smViewability.viewable2Seconds&&smViewability.sentevent==0){smViewability.sentevent=1;SMreportEvent('VIEWABILITY','',smViewability.currentTagId)}};function placementViewSummary(e){var t=Math.round(smViewability.SumViewablePlacement/smViewability.totalTimePlacement);if(e){smViewability.SumViewablePlacement=0;smViewability.totalTimePlacement=0};return t};function smUpdatemeasureStatus(){if(smViewability.measureType=='unknown'){return}
else if(smViewability.measureType=='not measurable'){smViewability.measureStatus='not measurable';return}
else if(smoperational.visibilityState=='hidden'){smViewability.measureStatus='hidden'}
else if(smViewability.viewability==!0){smViewability.measureStatus='viewable'}
else if(smoperational.visibilityState=='visible'){smViewability.measureStatus='visible'}};function SMreportEvent(e,i,n){var p=smcounters.hftNumber;p=Math.max(1,p);var r='';if(i){r=r+i};if(e=='LOAD'){r='network_latency:'+smoperational.latencyNetwork;initViewabilityStatus();if(smViewability.measureType=='safeFrame'||smViewability.measureType=='viewability'){smViewability.startMeasurePlacement=setInterval(smPlacementView,smViewability.viewabilityCheckIntervalPlacement)}};if(e=='IMPRESSION'){smViewability.startMeasureAd=setInterval(smAdView,smViewability.viewabilityCheckInterval);smViewability.currentTagId=n;smViewability.totalViewable=0;smViewability.viewable2Seconds=0;smViewability.sentevent=0;smViewability.totalTimeAd=0};if(e=='COMPLETE'&&smViewability.currentTagId==n){clearInterval(smViewability.startMeasureAd)};smReportThirdPartyPixel(e,n);try{var v=JSON.stringify(smMacrosList);smUpdatemeasureStatus();var h=smViewability.measureStatus,b=beautifyAreWeGotViewability(),a,m,d,u='',l=-1,w=new Date().getTime(),f=0,y=smoperational.lastEvent;try{var s=Math.round((new Date().getTime()-smoperational.startTime)/1)/1000;m='s:'+smoperational.loopnumber+',servingScenario:'+smoperational.servingScenario+smMembers.screen;if(n){updatesmTagsObjects(n,e);f=smTagsObjects[n].order;u='('+n+')';l=smTagsObjects[n].latency;d=JSON.stringify(b)};smcounters.eventsSentLog=smcounters.eventsSentLog+e+u+':'+s+',';a=smcounters.eventsSentLog;var c=a.length;if(c>250){a=a.substring(c-250,c)}}catch(t){r=r+'error: '+t+' ';smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+' SMreportEvent1:'+t;printErrors('Error while msg:'+t)}finally{if(l>smcounters.latencyLimit){l=smcounters.latencyLimit}};if(e=='TIMER'){s=smoperational.timerCounter*60};try{m=getShortString(m,sminternalconfig.maxParamSize*2)}catch(t){smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+' dynamicThree:'+t};randomNumber=Math.floor(Math.random()*100);var o=0;if(smEventsDictionary[e]){o=smEventsDictionary[e]};if(smcounters.smLogicErrorsCollection!=''){r=r+smcounters.smLogicErrorsCollection};try{r=getShortString(r,sminternalconfig.maxParamSize*2);r=encodeURIComponent(r)}catch(t){smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+' msgEnc:'+t};if(randomNumber<o){smcounters.smLogicErrorsCollection='';var g=smoperational.eventUrl+'?eventType='+e+'&'+smStringParams+'samplingPercent='+o+'&randomNumber='+randomNumber+'&playerid='+sminternalconfig.playerid+'&breakIndex='+smcounters.breakIndex+'&smTagId='+n+'&hftResponseType='+smoperational.hftResponseType+'&tagPriority='+f+'&smserveflash='+smcounters.serveFlash+'&protocol='+smoperational.protocol+'&smlatency='+l+'&visibility='+smViewability.viewability+':'+smoperational.visibilityState+':'+smoperational.servingScenario+'&clientVersion='+smoperational.clientVersion+'&waterfallString='+smoperational.waterfallStr+'&sessionId='+smoperational.sessionId+'&initts='+s+'&hftnumber='+p+'&docReferrer='+smMembers.docReferrer+'&topLocation='+smMembers.topLocation+'&smwidth='+smoperational.width+'&smheight='+smoperational.height+'&message='+r+'&previouseventtype='+y+'&viewability='+h+'&smdynamic3='+m+'&smdynamic4='+d+'&smdynamic2='+a+'&smdynamic1='+v;smCallURL(g)};smcounters.lastEventTS=new Date().getTime();if(smEventsDictionary[e]){smoperational.lastEvent=e};printLogs('%c event= '+e+' tagId= '+n+' breakIndex= '+smcounters.breakIndex+' order= '+f+' time from start= '+s,'color: #0000FF')}catch(t){printErrors('Error while report event. event='+e+', msg='+i+', sampling='+o+', randomNumber='+randomNumber+', error='+t);smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+' SMreportEvent2:'+t}};function getFlashVersion(){try{try{var t=new ActiveXObject('ShockwaveFlash.ShockwaveFlash.6');try{t.AllowScriptAccess='always'}catch(e){return'6,0,0'}}catch(e){};return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g,',').match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){return(navigator.plugins['Shockwave Flash 2.0']||navigator.plugins['Shockwave Flash']).description.replace(/\D+/g,',').match(/^,?(.+),?$/)[1]}}catch(e){}};return'0,0,1'};function smConvertStringToObject(e,t){var i=[],n=[];if(e.indexOf('&')!==-1){i=e.split('&')};if(e.indexOf('?')!==-1){n=i[0].split('?')};if(e.indexOf('#')!==-1){n=i[0].split('#')};i.push(n[1]);i.shift();for(var r=0;r<i.length;r++){var a=i[r].split('=');t[a[0]]=a[1].toString()}};function smGetVisibilityState(){try{var t,i;if(typeof document.hidden!=='undefined'){i='visibilitychange';t='visibilityState'}
else if(typeof document.mozHidden!=='undefined'){i='mozvisibilitychange';t='mozVisibilityState'}
else if(typeof document.msHidden!=='undefined'){i='msvisibilitychange';t='msVisibilityState'}
else if(typeof document.webkitHidden!=='undefined'){i='webkitvisibilitychange';t='webkitVisibilityState'};smoperational.visibilityState=document[t];document.addEventListener(i,function(){smoperational.visibilityState=document[t];if(smoperational.hftResponseType=='DYNAMIC'&&!smoperational.isUserInteraction){SMreportEvent('UI',smoperational.visibilityState)}},!1)}catch(e){smoperational.visibilityState='error'}};function smGetSessionSummary(){var t=0,i=0,r=0,n=0,a=0,o='';for(var e in smTagsObjects){t=t+smTagsObjects[e].requests;i=i+smTagsObjects[e].impressions;if(r<smTagsObjects[e].impressions){r=smTagsObjects[e].impressions;n=smTagsObjects[e].requests;a=e}};o='totalRequests='+t+' totalImpressions='+i+' bestTag='+a+' req='+n+' imps='+r;return o};var smOVAexeption='';function smOpenAdViewability(){try{var s=new OAVGeometryViewabilityCalculator(),t={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabiltyStatus:!1};this.checkViewability=function(e,i){if(r(e)){t.viewabiltyStatus=!0};i(t)};var r=function(e){var i=e.getBoundingClientRect(),r=i.width*i.height;if(a(e)===!0){return!1};if(o(e)===!0){return!1};n(e);if(t.percentViewable&&t.percentViewable<t.acceptedViewablePercentage){return!1};if(!t.percentViewable)return!1;return!0},n=function(e){t.percentObscured=t.percentObscured||0;var i=s.getViewabilityState(e,window);if(!i.error){t.percentViewable=i.percentViewable-t.percentObscured};return i},a=function(e){var t=window.getComputedStyle(e,null),i=t.getPropertyValue('visibility'),r=t.getPropertyValue('display');if(i=='hidden'||r=='none'){return!0};return!1},o=function(e){var r=e.getBoundingClientRect(),o=12,s=r.left+o,m=r.right-o,l=r.top+o,c=r.bottom-o,f=Math.floor(r.left+r.width/2),p=Math.floor(r.top+r.height/2),n=[{x:s,y:l},{x:f,y:l},{x:m,y:l},{x:s,y:p},{x:f,y:p},{x:m,y:p},{x:s,y:c},{x:f,y:c},{x:m,y:c}];for(var a in n){if(n[a]&&n[a].x>=0&&n[a].y>=0){elem=document.elementFromPoint(n[a].x,n[a].y);if(elem!=null&&elem!=e&&!e.contains(elem)){overlappingArea=i(r,elem.getBoundingClientRect());if(overlappingArea>0){t.percentObscured=100*i(r,elem.getBoundingClientRect());if(t.percentObscured>t.acceptedViewablePercentage){t.percentViewable=100-t.percentObscured;return!0}}}}};return!1},i=function(e,t){var i=e.width*e.height,r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),n=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return(r*n)/i}}catch(e){smOVAexeption='smOpenAdViewability='+e}};function OAVGeometryViewabilityCalculator(){this.getViewabilityState=function(n,a){try{var c=r(),f;if(c.area==Infinity){return{error:'Failed to determine viewport'}};var s=n.getBoundingClientRect(),l=s.width*s.height,m=e(window.top),o=t(n,a);if((c.area/l)<0.5){f=Math.floor(100*c.area/l)}
else{if(o.bottom>m.height){o.height-=(o.bottom-m.height)};if(o.top<0){o.height+=o.top};if(o.left<0){o.width+=o.left};if(o.right>m.width){o.width-=(o.right-m.width)};f=Math.floor(100*(o.width*o.height)/l)};return{clientWidth:m.width,clientHeight:m.height,objTop:s.top,objBottom:s.bottom,objLeft:s.left,objRight:s.right,percentViewable:f}}catch(i){smOVAexeption='this.getViewabilityState='+i}};var r=function(){try{var r=e(window),n=r.area,i=window;while(i!=window.top){i=i.parent;viewPortSize=e(i);if(viewPortSize.area<n){n=viewPortSize.area;r=viewPortSize}};return r}catch(t){smOVAexeption='getMinViewPortSize='+t}},e=function(e){try{var i={width:Infinity,height:Infinity,area:Infinity};if(!isNaN(e.document.body.clientWidth)&&e.document.body.clientWidth>0){i.width=e.document.body.clientWidth};if(!isNaN(e.document.body.clientHeight)&&e.document.body.clientHeight>0){i.height=e.document.body.clientHeight};if(!!e.document.documentElement&&!!e.document.documentElement.clientWidth&&!isNaN(e.document.documentElement.clientWidth)){i.width=e.document.documentElement.clientWidth};if(!!e.document.documentElement&&!!e.document.documentElement.clientHeight&&!isNaN(e.document.documentElement.clientHeight)){i.height=e.document.documentElement.clientHeight};if(!!e.innerWidth&&!isNaN(e.innerWidth)){i.width=Math.min(i.width,e.innerWidth)};if(!!e.innerHeight&&!isNaN(e.innerHeight)){i.height=Math.min(i.height,e.innerHeight)};i.area=i.height*i.width;return i}catch(t){smOVAexeption='getViewPortSize='+t}},t=function(r,n){try{var m=n,l=n.parent,a={width:0,height:0,left:0,right:0,top:0,bottom:0};if(r){var s=i(r,n);s.width=s.right-s.left;s.height=s.bottom-s.top;a=s;if(m!=l){var o=t(m.frameElement,l);if(o.bottom<a.bottom){if(o.bottom<a.top){a.top=o.bottom};a.bottom=o.bottom};if(o.right<a.right){if(o.right<a.left){a.left=o.right};a.right=o.right};a.width=a.right-a.left;a.height=a.bottom-a.top}};return a}catch(e){smOVAexeption='getAssetVisibleDimension='+e}},i=function(t,r){try{var o=r,s=r.parent,n={left:0,right:0,top:0,bottom:0};if(t){var a=t.getBoundingClientRect();if(o!=s){n=i(o.frameElement,s)};n={left:a.left+n.left,right:a.right+n.left,top:a.top+n.top,bottom:a.bottom+n.top}};return n}catch(e){smOVAexeption='getPositionRelativeToViewPort='+e}},n=function(e,i){try{var n=0,a=0,r={width:e.right-e.left,height:e.bottom-e.top};if(e.bottom<0||e.right<0||e.top>i.height||e.left>i.width||r.width<=0||r.height<=0){return 0};if(e.top<0){n=r.height+e.top;if(n>i.height){n=i.height}}
else if(e.top+r.height>i.height){n=i.height-e.top}
else{n=r.height};if(e.left<0){a=r.width+e.left;if(a>i.width){a=i.width}}
else if(e.left+r.width>i.width){a=i.width-e.left}
else{a=r.width};return Math.round((((a*n))/(r.width*r.height))*100)}catch(t){smOVAexeption='getAssetViewablePercentage='+t}}};function smTestUUID(){var e=new Date().getTime(),t='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(t){var i=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(t=='x'?i:(i&0x3|0x8)).toString(16)});return t};function checkSensitiveKeyWords(){var t=smoperational.sensitiveKeyWords,i=t.length;for(var e=0;e<i;e++){if(smMembers.topLocation.indexOf(t[e])>-1){smoperational.sensitiveKeyWordsState=!0;smoperational.sensitiveKeyWordsMatch='key:'+t[e]+'-top,';return};if(smMembers.docReferrer.indexOf(t[e])>-1){smoperational.sensitiveKeyWordsState=!0;smoperational.sensitiveKeyWordsMatch='key:'+t[e]+'-doc,';return};if(smoperational.declaredurl.indexOf(t[e])>-1){smoperational.sensitiveKeyWordsState=!0;smoperational.sensitiveKeyWordsMatch='key:'+t[e]+'-dec,';return}}};function advertiserKeyWordsFiltering(e){if(smoperational.sensitiveKeyWordsState){var i=smoperational.sensitiveKeyWordsAdvertisers,r=i.length;for(var t=0;t<r;t++){if(i[t]==e){return!1}}};return!0};function smGetStaticEnvVariables(){try{smoperational.protocol=location.protocol}catch(e){smoperational.protocol='error'};smoperational.protocol=smoperational.protocol.replace(/:$/,'');if(smoperational.protocol=='about:blank'){smoperational.protocol='iframe'};if(getFlashVersion().split(',').shift()<11){smcounters.serveFlash=0};try{try{smMembers.topLocation=top.location.href}catch(e){smMembers.topLocation='undefined'};if(!smMembers.topLocation||smMembers.topLocation.indexOf('.')==-1){try{smMembers.topLocation=window.location.href+'&smLoc=window'}catch(e){smMembers.topLocation='undefined'}};try{smMembers.topLocation=decodeURIComponent(smMembers.topLocation)}catch(e){smMembers.topLocation='undefined';sminternalconfig.requestStatic='&responseType=STATIC&decodeTopLocException=true'};if(smMembers.topLocation.indexOf('printsmlogs')>-1){sminternalconfig.logs=!0;for(key in smEventsDictionary){smEventsDictionary[key]=100}};if(smMembers.topLocation.indexOf('file://')>-1){smoperational.protocol='file'}}catch(e){smMembers.topLocation='undefined'};try{smMembers.docReferrer=document.referrer}catch(e){smMembers.docReferrer='undefined'};try{smMembers.docReferrer=decodeURIComponent(smMembers.docReferrer)}catch(e){smMembers.docReferrer='undefined';sminternalconfig.requestStatic='&responseType=STATIC&decodeDocRefException=true'};try{var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=screen.availHeight,r=screen.height,n=screen.width,o=screen.availWidth;smMembers.docdiff=t-n;smMembers.docdiff=Math.round(Math.min(0,smMembers.docdiff));smMembers.heightdiff=Math.round(r-i);smMembers.screen=' doc:'+t+'x'+a+',av:'+o+'x'+i+',res:'+n+'x'+r}catch(e){smMembers.screen='error'}};function smHandleMacros(){try{var e={};var n=document.getElementById('sm_main_script');if(n){smConvertStringToObject(n.src,e)};if(e['cv']){delete e.cv};if(e.bundleId||e['bundleId']==''){if(!e.appName){e.appName=''};if(e.appName.indexOf('BID_ATTR.app_name')>-1){e.appName=''};try{var o=e['bundleId'];if(e.appName==''&&bundleMap[o]){e.appName=bundleMap[o]}}catch(t){}};if(e['cname']){sminternalconfig.domain=decodeURIComponent(e['cname']);delete e.cname};if(e['protocol']){sminternalconfig.protocol=decodeURIComponent(e['protocol']);delete e.protocol};if(e['hftrefresh']){sminternalconfig.hftrefresh=e['hftrefresh'];delete e.hftrefresh};if(e['eventbase']){sminternalconfig.eventbase=decodeURIComponent(e['eventbase']);delete e.eventbase};if(e['playerid']){sminternalconfig.playerid=e['playerid'];delete e.playerid};if(e['playertype']){sminternalconfig.playertype=e['playertype'];delete e.playertype};if(e['qadomain']){sminternalconfig.qadomain=e['qadomain'];if(sminternalconfig.qadomain.length>1){smMembers.topLocation=sminternalconfig.qadomain;smMembers.docReferrer=sminternalconfig.qadomain};delete e.qadomain};if(e['serve_flash']){smcounters.serveFlash=e['serve_flash'];delete e.serve_flash};if(e['player_url']){smoperational.paramPlayerUrl=decodeURIComponent(e['player_url']);smoperational.clientVersion=smoperational.clientVersion+'_'+smoperational.paramPlayerUrl;delete e.player_url};if(e['click']){if(e['click'].indexOf('http')==0){smoperational.click=e['click'];smoperational.click=smoperational.click.replace('%%CLICK_URL_ESC%%','');smoperational.click=smoperational.click.replace('%%TTD_CLK_ESC%%','');smoperational.click=decodeURIComponent(e['click']);smoperational.click=smoperational.click.replace('%%CLICK_URL_ESC%%','');smoperational.click=smoperational.click.replace('%%TTD_CLK_ESC%%','');smoperational.click=decodeURIComponent(e['click']);smoperational.click=smoperational.click.replace('%%CLICK_URL_ESC%%','');smoperational.click=smoperational.click.replace('%%TTD_CLK_ESC%%','')};delete e.click};if(e['cb']){smoperational.sessionId=e['cb'];delete e.cb};if(e['smQAmode']){for(i in smEventsDictionary){smEventsDictionary[i]=100};sminternalconfig.smQAmode=!0;delete e.smQAmode};smMacrosList=smCreateObjectContainsValues(e,'sm_macro_');for(r in e){if(r.indexOf('sm_macro_')==0){delete e[r]}};for(r in e){for(i in smoperational.corruptedTraffic){if(e[r].indexOf(smoperational.corruptedTraffic[i])>-1){smoperational.corruptedTrafficState=!0}}}}catch(t){SMreportEvent('LOGIC_ERROR','smHandleMacros:'+t)};var a=sminternalconfig.protocol+'://'+e['server']+'.'+sminternalconfig.domain+'/'+sminternalconfig.eventbase;smoperational.eventUrl=a+'.evt';smoperational.hftUrl=a+'.hft';delete e.server;printLogs('smMacrosObject= '+JSON.stringify(e));try{e.declaredurl=decodeURIComponent(e.declaredurl);e.declaredurl=decodeURIComponent(e.declaredurl)}catch(t){e.declaredurl='undefined'};smoperational.declaredurl=e.declaredurl;if(e.declaredurl.indexOf('.')==-1){e.declaredurl=smHandleEmptyReportUrl()};for(var r in e){e[r]=getShortString(e[r],sminternalconfig.maxParamSize)};e.declaredurl=smHandleLongEncodingUrls(e.declaredurl);try{smStringParams=smConvertObjectToString(e)}catch(t){smStringParams='';smStringParams=n.src.slice(n.src.indexOf('?')+1)+'&';SMreportEvent('LOGIC_ERROR',t)}};function smHandleEmptyReportUrl(){var t='';try{var i={};if(smMembers.docReferrer&&smMembers.docReferrer.indexOf('.')>-1&&(smMembers.docReferrer.indexOf('?')>-1||smMembers.docReferrer.indexOf('#')>-1)){smConvertStringToObject(smMembers.docReferrer,i)};if(smMembers.topLocation&&smMembers.topLocation.indexOf('.')>-1&&(smMembers.topLocation.indexOf('?')>-1||smMembers.topLocation.indexOf('#')>-1)){smConvertStringToObject(smMembers.topLocation,i)};if(i['url']){t=i['url']}
else if(i['referrer']){t=i['referrer']}
else if(i['p']){t=i['p']}
else if(i['host']){t=i['host']};t=decodeURIComponent(t);t=decodeURIComponent(t);t=t.replace('unescape("','');t=t.replace('")','')}catch(e){t='undefined'}finally{return t}};function smHandleLongEncodingUrls(e){e=e.substring(0,sminternalconfig.maxParamSize);if(encodeURIComponent(e).length<sminternalconfig.maxParamSize){return encodeURIComponent(e)}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/2))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/2)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/3))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/3)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/5))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/5)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/6))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/6)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/7))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/7)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/8))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/8)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/9))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/9)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/10))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/10)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/15))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/15)))}
else if(encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/20))).length<sminternalconfig.maxParamSize){return encodeURIComponent(e.substring(0,Math.floor(sminternalconfig.maxParamSize/20)))}
else{return'invalid'}};function initMembers(){printLogs('Start init  members');smGetStaticEnvVariables();smHandleMacros();checkSensitiveKeyWords();smGetVisibilityState();var t=smoperational.sessionId.length;if(t<26){var i=26-t;smoperational.sessionId=smoperational.sessionId+'_'+createSessionId(i)};smoperational.servingScenario=getServingScenarioType();for(var e in smMembers){smMembers[e]=getShortString(smMembers[e],sminternalconfig.maxParamSize)};smMembers.docReferrer=smHandleLongEncodingUrls(smMembers.docReferrer);smMembers.topLocation=smHandleLongEncodingUrls(smMembers.topLocation);smoperational.timerInterval=setInterval(function(){smoperational.timerCounter++;var e=smGetSessionSummary(),t=placementViewSummary(!0);SMreportEvent('TIMER','view='+t+' '+e);if(smoperational.timerCounter>30){clearInterval(smoperational.timerInterval)}},60e3)};function getHftResponseFromServer(){smoperational.HftStartTime=new Date().getTime();smcounters.hftNumber++;var e=smoperational.hftUrl+'?'+smStringParams+'smserveflash='+smcounters.serveFlash+'&protocol='+smoperational.protocol+'&smlistsize='+smcounters.listsize+'&playerid='+sminternalconfig.playerid+'&hftnumber='+smcounters.hftNumber+'&visibility='+smViewability.viewability+':'+smoperational.visibilityState+':'+smoperational.servingScenario+sminternalconfig.requestStatic+'&docdiff='+smMembers.docdiff+'&heightdiff='+smMembers.heightdiff+'&docReferrer='+smMembers.docReferrer+'&topLocation='+smMembers.topLocation+'&clientVersion='+smoperational.clientVersion+'&randomNumber='+randomNumber;smCallURL(e)};function buildHftResObject(e){printLogs(JSON.stringify(e));var n=0,a=100;try{if(e.executionTime){n=e.executionTime;a=50}}catch(t){};smoperational.latencyNetwork=new Date().getTime()-smoperational.HftStartTime-n;if(smoperational.latencyNetwork<a&&smcounters.hftNumber<2){smoperational.clientVersion=smoperational.clientVersion+'low network latency:'+smoperational.latencyNetwork+',exec time:'+n;sminternalconfig.requestStatic='&responseType=STATIC';getHftResponseFromServer();return};sminternalconfig.playerid=e.playerRecord.id;if(sminternalconfig.playerid==7&&smcounters.hftNumber<2){var f=[{'id':6,'url':'https://cloud.selectmedia.asia/Code/player/av_api_desk_min.js'},{'id':7,'url':'https://cloud.selectmedia.asia/dev/player_v1/sm_player_api_v1.js'}];function p(t){var i=Math.floor(Math.random()*t.length);sminternalconfig.playerid=t[i].id;e.playerRecord.url=t[i].url;e.playerRecord.id=t[i].id};p(f)};if(!document.getElementById(sminternalconfig.playerContainer)){var r=document.createElement('div');r.id=sminternalconfig.playerContainer;r.style.width='300px';r.style.height='250px';document.body.appendChild(r)};var i=document.getElementById(sminternalconfig.playerContainer);function o(){smoperational.isUserInteraction=!0;i.removeEventListener('mouseenter',o,!1)};i.addEventListener('mouseenter',o,!1);function s(){SMreportEvent('PLAYER_CLICK','');i.removeEventListener('click',s,!1)};i.addEventListener('click',s,!1);if(sminternalconfig.hftrefresh>0){smMembers.sessionTTL=sminternalconfig.hftrefresh*1000}
else{smMembers.sessionTTL=e.hftRefresh*1000};smoperational.hftResponseType=e.responseType;smoperational.waterfallStr=e.waterfallId;smoperational.impressionPixel=e.impressionPixel;smoperational.clickPixel=e.clickPixel;smoperational.completePixel=e.completePixel;smoperational.loop=e.loopNumber;smoperational.width=e.width;smoperational.height=e.height;clearInterval(smcounters.hftRefreshInterval);if(e.responseType!=='STATIC'){smcounters.hftRefreshInterval=setInterval(function(){getHftResponseFromServer()},smMembers.sessionTTL)}
else{clearInterval(smoperational.timerInterval);var c=smGetSessionSummary();SMreportEvent('SESSION_END','loop='+smoperational.loopnumber+' '+c)};smMainResponse=e;if(sminternalconfig.smQAmode==!1){if((e.client_dilution_percent)&&smcounters.hftNumber==1){smEventsDictionary['AD_ERROR']=e.client_dilution_percent;smEventsDictionary['AD_REQUEST']=e.client_dilution_percent}
else{smEventsDictionary['AD_ERROR']=1;smEventsDictionary['AD_REQUEST']=1}};var d=new Date().getTime(),m=(smoperational.paramPlayerUrl.indexOf('http')==0?smoperational.paramPlayerUrl:e.playerRecord.url),l=m+'?cb='+smoperational.sessionId;smCallURL(l)};function hftBackupLogic(){sminternalconfig.currentHftFail++;if(sminternalconfig.maxHftFail>=sminternalconfig.currentHftFail){var e=sminternalconfig.currentHftFail*1000*(10+Math.floor(Math.random()*20)),t=setTimeout(getHftResponseFromServer,e)}};function parseHftResponseEvent(e){var i='';try{i=e.responseStatus;printLogs('Got HFT event from server. Start parsing HFT response. Status='+i);if(e.hftDecision=='STATIC_CONFIGURATION'&&e.playerRecord.id<2){hftBackupLogic()}
else{buildHftResObject(e)};printLogs('Finished parse server HFT response. Status='+i)}catch(t){printErrors('Exception while parsing server HFT response. loading defaults. '+t);SMreportEvent('LOGIC_ERROR','Failed to parse erver HFT response. err='+t)};printLogs('Start init SR player immediately after getting response from server')};try{initMembers();SMreportEvent('PRE_INIT',smoperational.sensitiveKeyWordsMatch);getHftResponseFromServer();printLogs('*** Finished SelectMedia main script ***')}catch(e$){printErrors('Error while executing SelectMedia main script. '+e$)};